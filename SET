echo "Using PROJECT_ID=$PROJECT_ID and API_DOMAIN=$API_DOMAIN"
export REGION=us-central1
export BASE_DIR=$(pwd)

# A custom domain like your-domain.com, or leave it blank for using the Ingress IP address instead.
export TF_LOG_PATH="$BASE_DIR"/tf.log
#export TF_LOG="DEBUG"
export TF_VAR_api_domain=$API_DOMAIN

export TF_VAR_project_id=$PROJECT_ID
export TF_BUCKET_NAME="${PROJECT_ID}-tfstate"
export TF_BUCKET_LOCATION="us"
export TF_VAR_config_bucket="${PROJECT_ID}-config"

export PARSER_CONFIG_FILE="gs://${TF_VAR_config_bucket}/parser_config.json"
export DOCAI_ENTITY_MAPPING_FILE="gs://${TF_VAR_config_bucket}/docai_entity_mapping.json"


# Fix Workload Identity Name
# kubectl get serviceaccount ksa -o json | jq '.metadata.name = "gke-sa"' | kubectl apply -f -

#manually pushing
# git push -u repo branch